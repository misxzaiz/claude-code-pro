<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tauri 参数序列化测试</title>
</head>
<body>
    <h1>Tauri 参数序列化测试</h1>
    <div>
        <h2>测试 1: camelCase 参数</h2>
        <button onclick="testCamelCase()">测试 camelCase</button>
        <pre id="result1"></pre>
    </div>
    <div>
        <h2>测试 2: snake_case 参数</h2>
        <button onclick="testSnakeCase()">测试 snake_case</button>
        <pre id="result2"></pre>
    </div>
    <div>
        <h2>测试 3: git_stage_file camelCase</h2>
        <button onclick="testGitStageFile()">测试 git_stage_file</button>
        <pre id="result3"></pre>
    </div>

    <script type="module">
        const { invoke } = window.__TAURI__.core;

        window.testCamelCase = async () => {
            try {
                console.log('测试 camelCase 参数');
                const result = await invoke('test_param_serialization', {
                    testParam: 'hello camelCase'
                });
                document.getElementById('result1').textContent = result;
            } catch (error) {
                document.getElementById('result1').textContent = `错误: ${error}`;
                console.error('camelCase 测试失败:', error);
            }
        };

        window.testSnakeCase = async () => {
            try {
                console.log('测试 snake_case 参数');
                const result = await invoke('test_param_serialization', {
                    test_param: 'hello snake_case'
                });
                document.getElementById('result2').textContent = result;
            } catch (error) {
                document.getElementById('result2').textContent = `错误: ${error}`;
                console.error('snakeCase 测试失败:', error);
            }
        };

        window.testGitStageFile = async () => {
            try {
                console.log('测试 git_stage_file');
                const result = await invoke('git_stage_file', {
                    workspacePath: 'D:\\Polaris',
                    filePath: 'test.txt'
                });
                document.getElementById('result3').textContent = '成功';
            } catch (error) {
                document.getElementById('result3').textContent = `错误: ${error}`;
                console.error('git_stage_file 测试失败:', error);
            }
        };
    </script>
</body>
</html>