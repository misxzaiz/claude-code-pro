# ğŸ”§ Skill Loader ä¿®å¤æŠ¥å‘Š

## é—®é¢˜æè¿°

### é”™è¯¯ä¿¡æ¯
```
skill-loader.ts:295  [SkillLoader] Failed to load skills from D:\Polaris\skills:
Error: Invalid SKILL.md: missing YAML frontmatter
    at SkillLoader.parseSkillMd (skill-loader.ts:312:13)
    at SkillLoader.loadSkillsFromDir (skill-loader.ts:280:38)
```

### æ ¹æœ¬åŸå› 

**SKILL.md æ–‡ä»¶ä½¿ç”¨ Windows é£æ ¼çš„æ¢è¡Œç¬¦ï¼ˆCRLFï¼š`\r\n`ï¼‰ï¼Œä½†ä»£ç ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼åªåŒ¹é… Unix é£æ ¼çš„æ¢è¡Œç¬¦ï¼ˆLFï¼š`\n`ï¼‰ã€‚**

### é—®é¢˜ä»£ç 

**ä¿®å¤å‰**ï¼ˆç¬¬ 309 è¡Œï¼‰ï¼š
```typescript
const frontmatterMatch = content.match(/^---\n([\s\S]+?)\n---/)
```

è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼è¦æ±‚ï¼š
- å¼€å¤´ï¼š`---` + LFï¼ˆ`\n`ï¼‰
- ç»“å°¾ï¼šLF + `---`

**ä½†å®é™…æ–‡ä»¶**ï¼ˆWindows ç³»ç»Ÿï¼‰ï¼š
- å¼€å¤´ï¼š`---` + CRLFï¼ˆ`\r\n`ï¼‰
- ç»“å°¾ï¼šCRLF + `---`

### éªŒè¯

ä½¿ç”¨ `cat -A` æŸ¥çœ‹æ–‡ä»¶çš„å®é™…å†…å®¹ï¼š
```
---^M$
name: frontend-design^M$
description: ...^M$
---^M$
^M$
```

`^M$` è¡¨ç¤º CRLFï¼ˆ`\r\n`ï¼‰

---

## è§£å†³æ–¹æ¡ˆ

### ä¿®æ”¹ä»£ç 

**æ–‡ä»¶**: `src/engines/deepseek/skills/skill-loader.ts`

**ä¿®æ”¹ä½ç½®**: ç¬¬ 309 è¡Œ

**ä¿®å¤å**ï¼š
```typescript
const frontmatterMatch = content.match(/^---\r?\n([\s\S]+?)\r?\n---/)
```

**å…³é”®æ”¹åŠ¨**ï¼š
- `\n` â†’ `\r?\n`
- ä½¿å¾—æ­£åˆ™è¡¨è¾¾å¼åŒæ—¶åŒ¹é… LFï¼ˆ`\n`ï¼‰å’Œ CRLFï¼ˆ`\r\n`ï¼‰

---

## éªŒè¯ä¿®å¤

### 1. ç¼–è¯‘æ£€æŸ¥
```bash
cd /d/Polaris
npx tsc --noEmit
```

**ç»“æœ**: âœ… æ— ç¼–è¯‘é”™è¯¯

### 2. æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼

| æ ¼å¼ | æ¢è¡Œç¬¦ | æµ‹è¯•ç»“æœ |
|------|--------|----------|
| Windows (CRLF) | `\r\n` | âœ… åŒ¹é… |
| Unix/Linux (LF) | `\n` | âœ… åŒ¹é… |
| æ—§ Mac (CR) | `\r` | âŒ ä¸åŒ¹é…ï¼ˆå·²æ·˜æ±°ï¼‰ |

---

## å½±å“èŒƒå›´

### å—å½±å“çš„æ–‡ä»¶
- `skills/frontend-design/SKILL.md`
- `skills/testing/SKILL.md`
- æœªæ¥æ‰€æœ‰ SKILL.md æ–‡ä»¶

### ä¿®å¤åçš„è¡Œä¸º
- âœ… æ”¯æŒè·¨å¹³å°å¼€å‘ï¼ˆWindows + Unixï¼‰
- âœ… å…¼å®¹ç°æœ‰çš„ CRLF æ–‡ä»¶
- âœ… å…¼å®¹æœªæ¥çš„ LF æ–‡ä»¶

---

## é¢„é˜²æªæ–½

### å»ºè®®

1. **ç»Ÿä¸€æ¢è¡Œç¬¦æ ¼å¼**
   - åœ¨é¡¹ç›®ä¸­é…ç½® `.editorconfig`
   - ä½¿ç”¨ Git çš„ `core.autocrlf` è®¾ç½®

2. **æ·»åŠ  E2E æµ‹è¯•**
   - æµ‹è¯•å®é™…æ–‡ä»¶çš„åŠ è½½
   - éªŒè¯è·¨å¹³å°å…¼å®¹æ€§

3. **å®Œå–„é”™è¯¯ä¿¡æ¯**
   - å½“è§£æå¤±è´¥æ—¶ï¼Œæ˜¾ç¤ºå…·ä½“åŸå› 
   - æç¤ºç”¨æˆ·æ£€æŸ¥æ–‡ä»¶æ ¼å¼

---

## ç›¸å…³æŠ€æœ¯çŸ¥è¯†

### æ¢è¡Œç¬¦ç±»å‹

| ç³»ç»Ÿ | æ¢è¡Œç¬¦ | åå…­è¿›åˆ¶ |
|------|--------|----------|
| Windows | CRLF | `0D 0A` (`\r\n`) |
| Unix/Linux | LF | `0A` (`\n`) |
| æ—§ Mac (OS 9) | CR | `0D` (`\r`) |

### æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ `\r?`

```typescript
\r?\n
```

- `r?` - å¯é€‰çš„å›è½¦ç¬¦ï¼ˆ`\r`ï¼‰
- `\n` - å¿…éœ€çš„æ¢è¡Œç¬¦ï¼ˆ`\n`ï¼‰

åŒ¹é…ï¼š
- `\n` (LF)
- `\r\n` (CRLF)

---

## æ€»ç»“

**é—®é¢˜**: æ­£åˆ™è¡¨è¾¾å¼ä¸å…¼å®¹ CRLF æ¢è¡Œç¬¦
**ä¿®å¤**: æ·»åŠ  `\r?` ä½¿å…¶å¯é€‰
**éªŒè¯**: âœ… ç¼–è¯‘é€šè¿‡
**çŠ¶æ€**: âœ… å·²ä¿®å¤

---

**ä¿®å¤äºº**: Claude (Anthropic)
**ä¿®å¤æ—¥æœŸ**: 2026-02-02
**æ–‡ä»¶**: `src/engines/deepseek/skills/skill-loader.ts`
